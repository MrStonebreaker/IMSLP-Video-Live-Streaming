function onYouTubeIframeAPIReady(){createAndAddVideoList()}function handleThumbnailClick(e){videoDivs[e].find("div").innerHTML="",createYoutubePlayer(videoDivs[e])}!function(e){var i="//1-dot-peachnote-broadcast.appspot.com",n=i+"/Landingpage/LandingpageA/preview.html";if(window.localStorage&&window.localStorage.getItem&&window.localStorage.setItem){var t=window.localStorage.getItem("mlb-rand");if(null===t&&(t=Math.random(),window.localStorage.setItem("mlb-rand",t)),!(0>t)&&(.5>t&&(n=i+"/Landingpage/LandingpageB/preview.html"),window.wgCategories&&-1!=window.wgCategories.indexOf("Scores"))){const d="256",o="144",r="-24";var s=[];window.videoDivs=[];var l,p=[];e('<style>.video-entry:nth-child(1){margin-left: 0;border-left:none;width:128px;}.cf:before,.cf:after{content: " ";display:table;}.cf:after{clear:both;}.text-muted{color: #777;}.video-entry {display: inline-block;white-space: normal;margin-left: 0.5em;margin-right: 0.5em;border-left: 1px solid #bbb;padding-left: 0.8em;padding-right: 0.8em; max-width: 246px;}.videoDiv {width: 256px; height: 144px; border: 2px solid #ebeae4;}.videoDivLive {width: 256px; height: 144px; border: 2px solid red;}.videoInfo {padding: 4px; width: 252px; } .videoThumbnailWrapper {width: 256px; height: 144px; overflow: hidden;} </style>.mlbHead{background: #c2c8cd; padding: 5px 10px 5px 3.5em; border-bottom: 1px solid #788791;}').appendTo(e("head"));var c=function(e){var a=Math.floor(e/3600),i=Math.floor((e-3600*a)/60),n=e-3600*a-60*i;n=Math.round(n),10>a&&(a="0"+a),10>i&&(i="0"+i),10>n&&(n="0"+n);var t=a+":"+i+":"+n;return t},v=function(e){var a=new Date(e),i=Date.now(),n=i-e,t=n/1e3,d=t/60,o=d/60,r=o/24;if(r>7)return a.toLocaleDateString();if(o>22){var s=Math.round(r);return s+" day"+(s>1?"s":"")+" ago"}if(d>50){var s=Math.round(o);return s+" hour"+(s>1?"s":"")+" ago"}if(t>50){var s=Math.round(d);return s+" minute"+(s>1?"s":"")+" ago"}if(t>10){var s=Math.round(t);return s+" second"+(s>1?"s":"")+" ago"}return"just now"};window.createYoutubePlayer=function(e){var a=new YT.Player(e.find("div").attr("id"),{height:o,width:d,videoId:e.find("div").attr("videoId"),playerVars:{controls:2,iv_load_policy:3,modestbranding:1,rel:0,showinfo:0,theme:"light"},events:{onReady:m,onStateChange:g}});p[p.length]=a};var m=function(e){for(var a=0;a<p.length-1;a++)p[a].stopVideo();e.target.playVideo()},g=function(){};window.createAndAddVideoList=function(){for(var a=0,i=e("#inner"),n=e("#list"),t=0;t<s.length;t++){var o=s[t];a++,startTime=o.startTime,endTime=o.endTime,channelName=o.channelName;var l,p=c((endTime-startTime)/1e3),m=v(startTime),g=e('<div class="video-entry">'),f=e('<div class="videoThumbnailWrapper"><img src="//img.youtube.com/vi/'+o.id+'/0.jpg" onclick="handleThumbnailClick('+t+')"  aria-hidden="true"style="cursor:pointer; margin-top: '+r+'px; width: 100%; "></img> </div>'),h=e('<div class="videoInfo">'),i=e("<div>").appendTo(g);"live"==o.lifeCycleStatus?(l=e('<div class="videoDivLive"> <div id="videoDiv'+t+'" videoId="'+o.id+'"style="width: '+d+'px;"> </div> </div>'),l.find("div").append(f),i.append(l),e('<span style="float:right" class="ddm">').append('<span style="color: red; margin-right: 0.1em;">live!<span>').appendTo(h)):"complete"==o.lifeCycleStatus&&(l=e('<div class="videoDiv"> <div id="videoDiv'+t+'" videoId="'+o.id+'" style="width: '+d+'px;"> </div> </div>'),l.find("div").append(f),i.append(l),endTime>0&&e('<span style="float:right" class="ddm">').append('<span class="icon icon47"></span>'+p).appendTo(h)),h.appendTo(i),videoDivs[t]=l,n.append(g),e('<span class="ddm">').text(m).prepend('<span class="icon icon33"></span>').appendTo(h),e("<br>").appendTo(h),e('<span class="text-muted"> by </span>').appendTo(h),e('<span style="max-width: 100px;">').text(o.channelName).appendTo(h),e('<span style="float:right;" class="ddm">').append('<span class="icon icon84"></span>'+o.viewCount).appendTo(h),0!=o.likeCount&&e('<span style="float:right;" class="ddm">').append('<span class="icon icon101"></span>'+o.likeCount).appendTo(h),e("<br>").appendTo(h)}var u="Live video ("+a+")";e("a[href=#tab-musiclivebroadcasting]").text(u)};var f=function(e){if(!e.results)return void console.error("no results in "+e);if(s=e.results,s.length>0){var a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i)}},h=function(t){l=e('<div class="we" style="max-width:initial">');var d=e('<div style="background: #c2c8cd; padding: 5px 10px 5px 3.5em; border-bottom: 1px solid #788791; padding-left: 1em;"><div class="we_file_download"><p><b>Live video recordings</b><br><span class="we_file_info2">You can find recordings of this piece played by other users here &mdash; Or record your own! <a href="'+n+'" target="_blank">Learn more...</a></p><div class="we_clear"></div></div><div class="we_clear"></div></div>');d.appendTo(l);var o=e('<div id="list" style=" /*overflow-x:auto;*/ width: 100%;display: table;white-space: nowrap;" class="cf">'),r=e('<div id="inner" class="we_edition_info_i gainlayout"style="margin-right: 0px !important; overflow-x:auto;"></div>').append(o);r=e('<div class="we_edition_info gainlayout"></div>').append(r),l.append(r);var s=e('<div class="video-entry" style="display:table-cell; vertical-align:middle;">');o.append(s),e('<a class="nxbutton" style="font-size: 0.95em; min-width: 110px; float: left" target="_blank" href="'+n+"?title="+t+'"><span style="font-size: 1.7em;float:left;color: #a22;margin-top:-0.1em; line-height: 0.9em;">â—‰</span><span class="label blue">&nbsp;Record now</span></a>').appendTo(s);var p=e(".tabs #Recordings"),c=p.parent().parent().parent(),v=c.tabs(),m=c.find("ul");a=e('<a href="#tab-musiclivebroadcasting">').append("Live video (+)");var g=e("<b>").append(a),h=e('<li class="ui-state-default ui-corner-top">').append(g);h.appendTo(m);var u=e('<div id="tab-musiclivebroadcasting">').append(l);u.appendTo(v),v.tabs("destroy"),v.tabs();var w=encodeURI(t);e.ajax({url:i+"/imslplistservlet?title="+w,type:"get",dataType:"jsonp",success:function(e){f(e)}})},u=mw.config.get("wgTitle");h(u)}}}(jQuery);